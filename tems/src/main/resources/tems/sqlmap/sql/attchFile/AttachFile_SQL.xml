<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="attachFileSql">


	<!-- 파일업로드 -->
	<insert id="attachFileDAO.uploadAttachFile" parameterClass="tems.com.attachFile.model.AttachFileVO">
		<isEqual property="boardName" compareValue="examNotice">
				INSERT INTO TNE_NOTICE_FILE
	            (FID,
	             BID,        
	             FILEPATH,        
	             ORGNAME,
	             SAVENAME,        
	             FILESIZE,        
	             REGID,
	             REGDATE
	            )
	            VALUES 
	            (TNE_NOTICE_FILE_SEQ.NEXTVAL,
	             #bID#,
	             #filePath#,
	             #orgName#,
	             #saveName#,
	             #fileSize#,
	             #regID#,
	             SYSDATE
	            )
		</isEqual>	
		
		<isEqual property="boardName" compareValue="examPds">
				INSERT INTO TNE_PDS_FILE
	            (FID,
	             BID,        
	             FILEPATH,        
	             ORGNAME,
	             SAVENAME,        
	             FILESIZE,        
	             REGID,
	             REGDATE
	            )
	            VALUES 
	            (TNE_PDS_FILE_SEQ.NEXTVAL,
	             #bID#,
	             #filePath#,
	             #orgName#,
	             #saveName#,
	             #fileSize#,
	             #regID#,
	             SYSDATE
	            )
		
		</isEqual>	
		
		<isEqual property="boardName" compareValue="examFaq">
				INSERT INTO TNE_FAQ_FILE
	            (FID,
	             BID,        
	             FILEPATH,        
	             ORGNAME,
	             SAVENAME,        
	             FILESIZE,        
	             REGID,
	             REGDATE
	            )
	            VALUES 
	            (TNE_FAQ_FILE_SEQ.NEXTVAL,
	             #bID#,
	             #filePath#,
	             #orgName#,
	             #saveName#,
	             #fileSize#,
	             #regID#,
	             SYSDATE
	            )
		</isEqual>
	</insert>

		
	<!-- 파일 리스트 -->
	<select id="attachFileDAO.listAttachFile" parameterClass="java.util.Map" resultClass="tems.com.attachFile.model.AttachFileVO">
       	<![CDATA[
       		SELECT 
				    FID,
		            BID,        
		            FILEPATH,        
		            ORGNAME,
		            SAVENAME,        
		            FILESIZE,        
		            REGID,
		            REGDATE 
       	]]>	
			<isEqual property="boardName" compareValue="examNotice">
		        FROM TNE_NOTICE_FILE
			</isEqual>
			<isEqual property="boardName" compareValue="examFaq">
				FROM TNE_FAQ_FILE
			</isEqual>
			<isEqual property="boardName" compareValue="examPds">
				FROM TNE_PDS_FILE
			</isEqual>
		<![CDATA[
			WHERE BID=#bID#
		]]>	
			
	</select>
		
	<!-- 특정글 모든 파일 삭제 -->
	<delete id="attachFileDAO.deleteAttachFileByBID" parameterClass="java.util.Map">
        <isEqual property="boardName" compareValue="examNotice">
			DELETE FROM TNE_NOTICE_FILE
			WHERE BID=#bID#
		</isEqual>
		
		<isEqual property="boardName" compareValue="examFaq">
			DELETE FROM TNE_FAQ_FILE
			WHERE BID=#bID#
		</isEqual>
		
		<isEqual property="boardName" compareValue="examPds">
			DELETE FROM TNE_PDS_FILE
			WHERE BID=#bID#
		</isEqual>
		
		
	</delete>
	
	<!-- 특정 파일 삭제 -->
	<delete id="attachFileDAO.deleteAttachFile" parameterClass="java.util.Map">
         <isEqual property="boardName" compareValue="examNotice">
			DELETE FROM TNE_NOTICE_FILE
			WHERE fID=#fID#
		</isEqual>
		
		<isEqual property="boardName" compareValue="examFaq">
			DELETE FROM TNE_FAQ_FILE
			WHERE fID=#fID#
		</isEqual>
		
		<isEqual property="boardName" compareValue="examPds">
			DELETE FROM TNE_PDS_FILE
			WHERE fID=#fID#
		</isEqual>
	</delete>
	
	
	
	<!-- 안씀 -->
	<update id="attachFileDAO.updateBID" parameterClass="java.util.Map">
    	<![CDATA[
	    	UPDATE TNE_NOTICE_FILE
	    	SET BID = #bID#
	    	WHERE FID = #fID#
	    ]]>	
	</update>
	
</sqlMap>